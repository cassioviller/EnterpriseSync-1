# üîß PROMPT: Adicionar Menu de Fotos Faciais no Cabe√ßalho

## üéØ Objetivo

Adicionar a op√ß√£o **"Gerenciar Fotos Faciais"** no menu dropdown de **Ponto** no cabe√ßalho da aplica√ß√£o.

---

## üìã TAREFA: Modificar o Template do Cabe√ßalho

Localize o arquivo de template que cont√©m o menu de navega√ß√£o (provavelmente `base.html`, `navbar.html`, ou similar).

**Encontre o dropdown do menu "Ponto"** que atualmente tem:
- Registrar Ponto
- Ponto Facial Autom√°tico
- Importar Pontos

**Adicione a nova op√ß√£o** ap√≥s "Ponto Facial Autom√°tico":

```html
<!-- Menu Ponto (Dropdown) -->
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="navbarPonto" role="button" 
       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fas fa-clock"></i> Ponto
    </a>
    <div class="dropdown-menu" aria-labelledby="navbarPonto">
        <!-- Op√ß√µes existentes -->
        <a class="dropdown-item" href="/ponto/registrar">
            <i class="fas fa-fingerprint"></i> Registrar Ponto
        </a>
        
        <a class="dropdown-item" href="/ponto/facial-automatico">
            <i class="fas fa-camera"></i> Ponto Facial Autom√°tico
        </a>
        
        <!-- ADICIONAR ESTA NOVA OP√á√ÉO -->
        <a class="dropdown-item" href="/ponto/gerenciar-fotos-faciais">
            <i class="fas fa-images"></i> Gerenciar Fotos Faciais
        </a>
        
        <div class="dropdown-divider"></div>
        
        <a class="dropdown-item" href="/ponto/importar">
            <i class="fas fa-file-upload"></i> Importar Pontos
        </a>
    </div>
</li>
```

---

## üìã TAREFA 2: Criar Rota de Listagem de Funcion√°rios

No arquivo `views.py`, adicione uma rota que lista os funcion√°rios para escolher qual ter√° as fotos gerenciadas:

```python
@app.route('/ponto/gerenciar-fotos-faciais')
@login_required
def gerenciar_fotos_faciais_lista():
    """Lista funcion√°rios para gerenciar fotos faciais"""
    
    # Buscar funcion√°rios ativos
    funcionarios = Funcionario.query.filter_by(
        admin_id=current_user.id,
        ativo=True
    ).order_by(Funcionario.nome).all()
    
    return render_template('ponto_gerenciar_fotos_lista.html', 
                         funcionarios=funcionarios,
                         titulo='Gerenciar Fotos Faciais')
```

---

## üìã TAREFA 3: Criar Template de Listagem

Crie um arquivo `templates/ponto_gerenciar_fotos_lista.html`:

```html
{% extends "base.html" %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-images"></i> Gerenciar Fotos Faciais
                    </h4>
                    <small>Selecione um funcion√°rio para gerenciar suas fotos de reconhecimento facial</small>
                </div>
                <div class="card-body">
                    
                    {% if funcionarios %}
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Foto Atual</th>
                                    <th>Nome</th>
                                    <th>CPF</th>
                                    <th>Cargo</th>
                                    <th>Fotos Cadastradas</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for funcionario in funcionarios %}
                                <tr>
                                    <td>
                                        {% if funcionario.fotos_faciais %}
                                            <img src="{{ funcionario.fotos_faciais[0].foto_base64 }}" 
                                                 alt="{{ funcionario.nome }}" 
                                                 style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                                        {% else %}
                                            <div style="width: 50px; height: 50px; border-radius: 50%; background: #ddd; display: flex; align-items: center; justify-content: center;">
                                                <i class="fas fa-user text-muted"></i>
                                            </div>
                                        {% endif %}
                                    </td>
                                    <td>{{ funcionario.nome }}</td>
                                    <td>{{ funcionario.cpf }}</td>
                                    <td>{{ funcionario.cargo or '-' }}</td>
                                    <td>
                                        <span class="badge badge-{{ 'success' if funcionario.fotos_faciais|length >= 3 else 'warning' if funcionario.fotos_faciais|length > 0 else 'danger' }}">
                                            {{ funcionario.fotos_faciais|length }} foto(s)
                                        </span>
                                        {% if funcionario.fotos_faciais|length < 3 %}
                                            <small class="text-muted d-block">Recomendado: 3-5 fotos</small>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <a href="/ponto/funcionario/{{ funcionario.id }}/fotos-faciais" 
                                           class="btn btn-sm btn-primary">
                                            <i class="fas fa-camera"></i> Gerenciar Fotos
                                        </a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        Nenhum funcion√°rio ativo cadastrado.
                    </div>
                    {% endif %}
                    
                </div>
            </div>
            
            <!-- Card de Orienta√ß√µes -->
            <div class="card mt-3">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-info-circle"></i> Dicas para Fotos de Qualidade</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6><i class="fas fa-check-circle text-success"></i> Fa√ßa:</h6>
                            <ul>
                                <li>‚úÖ Use local bem iluminado (luz natural √© melhor)</li>
                                <li>‚úÖ Rosto centralizado e olhando para a c√¢mera</li>
                                <li>‚úÖ Cadastre 3-5 fotos por funcion√°rio</li>
                                <li>‚úÖ Inclua varia√ß√µes: com/sem √≥culos, diferentes √¢ngulos</li>
                                <li>‚úÖ Express√µes variadas (sorrindo e s√©rio)</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-times-circle text-danger"></i> Evite:</h6>
                            <ul>
                                <li>‚ùå Fotos muito escuras ou muito claras</li>
                                <li>‚ùå Sombras no rosto</li>
                                <li>‚ùå Chap√©u, bon√© ou acess√≥rios que cubram o rosto</li>
                                <li>‚ùå Fotos desfocadas ou tremidas</li>
                                <li>‚ùå Fotos muito pequenas (m√≠nimo 150x150px)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="alert alert-primary mt-3 mb-0">
                        <strong><i class="fas fa-lightbulb"></i> Dica:</strong>
                        Funcion√°rios com √≥culos devem ter pelo menos 2 fotos: uma com √≥culos e outra sem.
                        Isso melhora significativamente a precis√£o do reconhecimento!
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</div>
{% endblock %}
```

---

## üéØ Resultado Esperado

Ap√≥s implementar, o menu ficar√° assim:

```
Ponto ‚ñº
  ‚îú‚îÄ Registrar Ponto
  ‚îú‚îÄ Ponto Facial Autom√°tico
  ‚îú‚îÄ Gerenciar Fotos Faciais  ‚Üê NOVO
  ‚îú‚îÄ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  ‚îî‚îÄ Importar Pontos
```

Ao clicar em **"Gerenciar Fotos Faciais"**:
1. Abre p√°gina com lista de funcion√°rios
2. Mostra quantas fotos cada um tem cadastradas
3. Badge colorido indica status:
   - üî¥ Vermelho: 0 fotos (sem reconhecimento)
   - üü° Amarelo: 1-2 fotos (reconhecimento b√°sico)
   - üü¢ Verde: 3+ fotos (reconhecimento ideal)
4. Bot√£o "Gerenciar Fotos" leva para a p√°gina espec√≠fica do funcion√°rio

---

## üí° Observa√ß√µes

- A rota `/ponto/funcionario/<id>/fotos-faciais` j√° existe (criada anteriormente)
- Estamos apenas criando um ponto de entrada mais acess√≠vel no menu
- A listagem facilita o gerenciamento de m√∫ltiplos funcion√°rios

‚úÖ Menu de navega√ß√£o completo e intuitivo!
