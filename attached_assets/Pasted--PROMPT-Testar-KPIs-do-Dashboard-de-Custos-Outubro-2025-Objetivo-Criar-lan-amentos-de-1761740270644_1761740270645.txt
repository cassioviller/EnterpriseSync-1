# ğŸ§ª PROMPT: Testar KPIs do Dashboard de Custos - Outubro/2025

**Objetivo:** Criar lanÃ§amentos de custos (AlimentaÃ§Ã£o, Transporte, Faltas Justificadas e Outros) para todos os funcionÃ¡rios em Outubro/2025 e validar se as KPIs do dashboard estÃ£o calculando corretamente.

---

## ğŸ“Š ANÃLISE DO DASHBOARD ATUAL

**Imagem fornecida mostra:**
- âœ… MÃ£o de Obra: R$ 12.767,59 (jÃ¡ calculado)
- âŒ AlimentaÃ§Ã£o: R$ 0,00 (falta criar lanÃ§amentos)
- âŒ Transporte: R$ 0,00 (falta criar lanÃ§amentos)
- âŒ Faltas Justificadas: 0 dias (falta criar lanÃ§amentos)
- âŒ Outros: R$ 0,00 (falta criar lanÃ§amentos)

**Total Atual:** R$ 12.767,59 (apenas mÃ£o de obra)

---

## ğŸ¯ OBJETIVO DO TESTE

Criar lanÃ§amentos realistas para **5 funcionÃ¡rios** em **Outubro/2025** (01/10 a 31/10) para validar que as KPIs exibem valores corretos.

---

## ğŸ“‹ DADOS DOS FUNCIONÃRIOS

Assumindo que o sistema tem 5 funcionÃ¡rios cadastrados:

| ID | Nome | FunÃ§Ã£o | SalÃ¡rio | Obra |
|---|---|---|---|---|
| 1 | JoÃ£o da Silva | Pedreiro | R$ 2.500,00 | Residencial Jardim das Flores |
| 2 | Maria Santos | Servente | R$ 1.800,00 | Residencial Jardim das Flores |
| 3 | Pedro Oliveira | Encarregado | R$ 3.500,00 | EdifÃ­cio Comercial Centro |
| 4 | Carlos Souza | Motorista | R$ 2.200,00 | EdifÃ­cio Comercial Centro |
| 5 | Ana Costa | Administrativo | R$ 2.800,00 | Sede Administrativa |

---

## ğŸ½ï¸ TAREFA 1: CRIAR LANÃ‡AMENTOS DE ALIMENTAÃ‡ÃƒO

### **Regra de NegÃ³cio:**
- FuncionÃ¡rios de obra recebem vale-refeiÃ§Ã£o diÃ¡rio
- Valor: R$ 25,00 por dia trabalhado
- Outubro/2025: 22 dias Ãºteis

### **LanÃ§amentos a Criar:**

**Para cada funcionÃ¡rio:**
- Dias trabalhados em Outubro: 22 dias (considerar faltas se houver)
- Valor por refeiÃ§Ã£o: R$ 25,00
- Total por funcionÃ¡rio: 22 Ã— R$ 25,00 = R$ 550,00

**Script SQL:**

```sql
-- Limpar lanÃ§amentos anteriores de alimentaÃ§Ã£o (se necessÃ¡rio)
DELETE FROM custo_obra 
WHERE tipo = 'alimentacao' 
  AND EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10;

-- Inserir lanÃ§amentos de alimentaÃ§Ã£o para Outubro/2025
-- FuncionÃ¡rio 1: JoÃ£o da Silva (22 dias)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'alimentacao', 'AlimentaÃ§Ã£o', 550.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - JoÃ£o da Silva', 1, 54, NOW());

-- FuncionÃ¡rio 2: Maria Santos (21 dias - 1 falta)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'alimentacao', 'AlimentaÃ§Ã£o', 525.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - Maria Santos', 2, 54, NOW());

-- FuncionÃ¡rio 3: Pedro Oliveira (22 dias)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(2, 'alimentacao', 'AlimentaÃ§Ã£o', 550.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - Pedro Oliveira', 3, 54, NOW());

-- FuncionÃ¡rio 4: Carlos Souza (22 dias)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(2, 'alimentacao', 'AlimentaÃ§Ã£o', 550.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - Carlos Souza', 4, 54, NOW());

-- FuncionÃ¡rio 5: Ana Costa (nÃ£o recebe - trabalha na sede)
-- (nÃ£o criar lanÃ§amento)
```

**Total Esperado de AlimentaÃ§Ã£o:** R$ 2.175,00

---

## ğŸš— TAREFA 2: CRIAR LANÃ‡AMENTOS DE TRANSPORTE

### **Regra de NegÃ³cio:**
- FuncionÃ¡rios de obra recebem vale-transporte diÃ¡rio
- Valor: R$ 8,00 por dia trabalhado (ida + volta)
- Outubro/2025: 22 dias Ãºteis

### **LanÃ§amentos a Criar:**

**Para cada funcionÃ¡rio:**
- Dias trabalhados em Outubro: 22 dias
- Valor por dia: R$ 8,00
- Total por funcionÃ¡rio: 22 Ã— R$ 8,00 = R$ 176,00

**Script SQL:**

```sql
-- Limpar lanÃ§amentos anteriores de transporte (se necessÃ¡rio)
DELETE FROM custo_obra 
WHERE tipo = 'transporte' 
  AND EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10;

-- Inserir lanÃ§amentos de transporte para Outubro/2025
-- FuncionÃ¡rio 1: JoÃ£o da Silva (22 dias)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'transporte', 'Transporte', 176.00, '2025-10-31', 'Vale-transporte Outubro/2025 - JoÃ£o da Silva', 1, 54, NOW());

-- FuncionÃ¡rio 2: Maria Santos (21 dias - 1 falta)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'transporte', 'Transporte', 168.00, '2025-10-31', 'Vale-transporte Outubro/2025 - Maria Santos', 2, 54, NOW());

-- FuncionÃ¡rio 3: Pedro Oliveira (22 dias)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(2, 'transporte', 'Transporte', 176.00, '2025-10-31', 'Vale-transporte Outubro/2025 - Pedro Oliveira', 3, 54, NOW());

-- FuncionÃ¡rio 4: Carlos Souza (22 dias)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(2, 'transporte', 'Transporte', 176.00, '2025-10-31', 'Vale-transporte Outubro/2025 - Carlos Souza', 4, 54, NOW());

-- FuncionÃ¡rio 5: Ana Costa (usa carro prÃ³prio - nÃ£o recebe)
-- (nÃ£o criar lanÃ§amento)
```

**Total Esperado de Transporte:** R$ 696,00

---

## ğŸ“… TAREFA 3: CRIAR LANÃ‡AMENTOS DE FALTAS JUSTIFICADAS

### **Regra de NegÃ³cio:**
- Faltas justificadas nÃ£o geram desconto no salÃ¡rio
- Mas sÃ£o registradas como custo (salÃ¡rio pago sem trabalho)
- Valor: SalÃ¡rio diÃ¡rio do funcionÃ¡rio (salÃ¡rio / 30)

### **CenÃ¡rios:**

**FuncionÃ¡rio 2: Maria Santos**
- 1 falta justificada em 13/10/2025 (atestado mÃ©dico)
- SalÃ¡rio diÃ¡rio: R$ 1.800 / 30 = R$ 60,00

**Script SQL:**

```sql
-- Limpar lanÃ§amentos anteriores de faltas justificadas (se necessÃ¡rio)
DELETE FROM custo_obra 
WHERE tipo = 'falta_justificada' 
  AND EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10;

-- Inserir lanÃ§amento de falta justificada
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'falta_justificada', 'Faltas Justificadas', 60.00, '2025-10-13', 'Falta justificada (atestado mÃ©dico) - Maria Santos', 2, 54, NOW());
```

**Total Esperado de Faltas Justificadas:** R$ 60,00  
**Total de Dias:** 1 dia

---

## ğŸ”§ TAREFA 4: CRIAR LANÃ‡AMENTOS DE OUTROS CUSTOS

### **Regra de NegÃ³cio:**
- Custos diversos: EPIs, ferramentas, uniformes, treinamentos
- Valores variados

### **LanÃ§amentos a Criar:**

**Outubro/2025:**

1. **EPIs (Equipamentos de ProteÃ§Ã£o Individual)**
   - Capacetes, luvas, botas
   - Valor: R$ 450,00

2. **Ferramentas**
   - Martelo, trena, nÃ­vel
   - Valor: R$ 320,00

3. **Uniformes**
   - Camisas, calÃ§as
   - Valor: R$ 280,00

4. **Treinamento de SeguranÃ§a**
   - Curso NR-18
   - Valor: R$ 500,00

**Script SQL:**

```sql
-- Limpar lanÃ§amentos anteriores de outros custos (se necessÃ¡rio)
DELETE FROM custo_obra 
WHERE tipo = 'outros' 
  AND EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10;

-- Inserir lanÃ§amentos de outros custos
-- EPIs
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, admin_id, created_at) VALUES
(1, 'outros', 'Outros', 250.00, '2025-10-05', 'EPIs - Capacetes, luvas, botas (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 200.00, '2025-10-05', 'EPIs - Capacetes, luvas, botas (Obra 2)', 54, NOW());

-- Ferramentas
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, admin_id, created_at) VALUES
(1, 'outros', 'Outros', 180.00, '2025-10-10', 'Ferramentas - Martelo, trena, nÃ­vel (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 140.00, '2025-10-10', 'Ferramentas - Martelo, trena, nÃ­vel (Obra 2)', 54, NOW());

-- Uniformes
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, admin_id, created_at) VALUES
(1, 'outros', 'Outros', 150.00, '2025-10-15', 'Uniformes - Camisas, calÃ§as (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 130.00, '2025-10-15', 'Uniformes - Camisas, calÃ§as (Obra 2)', 54, NOW());

-- Treinamento
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, admin_id, created_at) VALUES
(1, 'outros', 'Outros', 300.00, '2025-10-20', 'Treinamento NR-18 (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 200.00, '2025-10-20', 'Treinamento NR-18 (Obra 2)', 54, NOW());
```

**Total Esperado de Outros:** R$ 1.550,00

---

## ğŸ“Š RESUMO DOS VALORES ESPERADOS

| Categoria | Valor Esperado | ObservaÃ§Ã£o |
|---|---|---|
| **MÃ£o de Obra** | R$ 12.767,59 | JÃ¡ existe (folha processada) |
| **AlimentaÃ§Ã£o** | R$ 2.175,00 | 4 funcionÃ¡rios Ã— ~R$ 540 |
| **Transporte** | R$ 696,00 | 4 funcionÃ¡rios Ã— ~R$ 174 |
| **Faltas Justificadas** | R$ 60,00 (1 dia) | 1 falta de Maria Santos |
| **Outros** | R$ 1.550,00 | EPIs, ferramentas, uniformes, treinamento |
| **TOTAL** | **R$ 17.248,59** | Soma de todas as categorias |

---

## âœ… SCRIPT SQL COMPLETO (COPIAR E EXECUTAR)

```sql
-- ============================================
-- SCRIPT COMPLETO: LANÃ‡AMENTOS DE CUSTOS OUTUBRO/2025
-- ============================================

-- 1. ALIMENTAÃ‡ÃƒO (R$ 2.175,00)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'alimentacao', 'AlimentaÃ§Ã£o', 550.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - JoÃ£o da Silva', 1, 54, NOW()),
(1, 'alimentacao', 'AlimentaÃ§Ã£o', 525.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - Maria Santos', 2, 54, NOW()),
(2, 'alimentacao', 'AlimentaÃ§Ã£o', 550.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - Pedro Oliveira', 3, 54, NOW()),
(2, 'alimentacao', 'AlimentaÃ§Ã£o', 550.00, '2025-10-31', 'Vale-refeiÃ§Ã£o Outubro/2025 - Carlos Souza', 4, 54, NOW());

-- 2. TRANSPORTE (R$ 696,00)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'transporte', 'Transporte', 176.00, '2025-10-31', 'Vale-transporte Outubro/2025 - JoÃ£o da Silva', 1, 54, NOW()),
(1, 'transporte', 'Transporte', 168.00, '2025-10-31', 'Vale-transporte Outubro/2025 - Maria Santos', 2, 54, NOW()),
(2, 'transporte', 'Transporte', 176.00, '2025-10-31', 'Vale-transporte Outubro/2025 - Pedro Oliveira', 3, 54, NOW()),
(2, 'transporte', 'Transporte', 176.00, '2025-10-31', 'Vale-transporte Outubro/2025 - Carlos Souza', 4, 54, NOW());

-- 3. FALTAS JUSTIFICADAS (R$ 60,00 - 1 dia)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, funcionario_id, admin_id, created_at) VALUES
(1, 'falta_justificada', 'Faltas Justificadas', 60.00, '2025-10-13', 'Falta justificada (atestado mÃ©dico) - Maria Santos', 2, 54, NOW());

-- 4. OUTROS (R$ 1.550,00)
INSERT INTO custo_obra (obra_id, tipo, categoria, valor, data_custo, descricao, admin_id, created_at) VALUES
(1, 'outros', 'Outros', 250.00, '2025-10-05', 'EPIs - Capacetes, luvas, botas (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 200.00, '2025-10-05', 'EPIs - Capacetes, luvas, botas (Obra 2)', 54, NOW()),
(1, 'outros', 'Outros', 180.00, '2025-10-10', 'Ferramentas - Martelo, trena, nÃ­vel (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 140.00, '2025-10-10', 'Ferramentas - Martelo, trena, nÃ­vel (Obra 2)', 54, NOW()),
(1, 'outros', 'Outros', 150.00, '2025-10-15', 'Uniformes - Camisas, calÃ§as (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 130.00, '2025-10-15', 'Uniformes - Camisas, calÃ§as (Obra 2)', 54, NOW()),
(1, 'outros', 'Outros', 300.00, '2025-10-20', 'Treinamento NR-18 (Obra 1)', 54, NOW()),
(2, 'outros', 'Outros', 200.00, '2025-10-20', 'Treinamento NR-18 (Obra 2)', 54, NOW());

-- Verificar totais
SELECT 
    tipo,
    categoria,
    COUNT(*) as quantidade,
    SUM(valor) as total
FROM custo_obra
WHERE EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10
  AND admin_id = 54
GROUP BY tipo, categoria
ORDER BY tipo;
```

---

## ğŸ§ª VALIDAÃ‡ÃƒO DAS KPIS

ApÃ³s executar o script SQL, acessar o dashboard e verificar:

### **1. KPI de AlimentaÃ§Ã£o:**
- [ ] Valor exibido: **R$ 2.175,00**
- [ ] Ãcone de garfo e faca visÃ­vel
- [ ] Cor correta

### **2. KPI de Transporte:**
- [ ] Valor exibido: **R$ 696,00**
- [ ] Ãcone de carro visÃ­vel
- [ ] Cor correta

### **3. KPI de Faltas Justificadas:**
- [ ] Valor exibido: **1 dia** (ou R$ 60,00 se mostrar valor)
- [ ] Ãcone de alerta visÃ­vel
- [ ] Cor correta

### **4. KPI de Outros:**
- [ ] Valor exibido: **R$ 1.550,00**
- [ ] Ãcone de engrenagem visÃ­vel
- [ ] Cor correta

### **5. KPI de Total:**
- [ ] Valor exibido: **R$ 17.248,59**
- [ ] Soma correta de todas as categorias
- [ ] Ãcone de calculadora visÃ­vel

---

## ğŸ” QUERY DE VERIFICAÃ‡ÃƒO

Para verificar se os lanÃ§amentos foram criados corretamente:

```sql
-- Verificar totais por categoria
SELECT 
    tipo,
    categoria,
    COUNT(*) as qtd_lancamentos,
    SUM(valor) as total,
    MIN(data_custo) as data_inicio,
    MAX(data_custo) as data_fim
FROM custo_obra
WHERE EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10
  AND admin_id = 54
GROUP BY tipo, categoria
ORDER BY tipo;

-- Resultado esperado:
-- tipo              | categoria           | qtd | total      | data_inicio | data_fim
-- -----------------|---------------------|-----|------------|-------------|------------
-- alimentacao      | AlimentaÃ§Ã£o         | 4   | 2175.00    | 2025-10-31  | 2025-10-31
-- transporte       | Transporte          | 4   | 696.00     | 2025-10-31  | 2025-10-31
-- falta_justificada| Faltas Justificadas | 1   | 60.00      | 2025-10-13  | 2025-10-13
-- outros           | Outros              | 8   | 1550.00    | 2025-10-05  | 2025-10-20
-- mao_obra         | MÃ£o de Obra         | X   | 12767.59   | ...         | ...

-- Total geral
SELECT SUM(valor) as total_geral
FROM custo_obra
WHERE EXTRACT(YEAR FROM data_custo) = 2025 
  AND EXTRACT(MONTH FROM data_custo) = 10
  AND admin_id = 54;
-- Resultado esperado: R$ 17.248,59
```

---

## ğŸ“Š TESTE DE FILTROS

ApÃ³s validar os valores, testar os filtros do dashboard:

### **1. Filtro de Data:**
- [ ] Selecionar "MÃªs Atual" â†’ Deve mostrar Outubro/2025
- [ ] Selecionar "Ãšltimo MÃªs" â†’ Deve mostrar Setembro/2025
- [ ] Selecionar "3 Meses" â†’ Deve mostrar Ago-Out/2025
- [ ] Selecionar "Ano Atual" â†’ Deve mostrar Jan-Out/2025

### **2. Filtro de Obra:**
- [ ] Selecionar "Todas as Obras" â†’ Total R$ 17.248,59
- [ ] Selecionar "Obra 1" â†’ Verificar valores proporcionais
- [ ] Selecionar "Obra 2" â†’ Verificar valores proporcionais

---

## ğŸ¯ RESULTADO ESPERADO

ApÃ³s executar este prompt, o dashboard deve exibir:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Custos Detalhados do PerÃ­odo                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ½ï¸           ğŸš—          ğŸ‘¥           âš ï¸          âš™ï¸         ğŸ§®   â”‚
â”‚ AlimentaÃ§Ã£o  Transporte  MÃ£o de Obra  Faltas    Outros     Total â”‚
â”‚ R$ 2.175,00  R$ 696,00   R$ 12.767,59 1 dia    R$ 1.550,00      â”‚
â”‚                                       R$ 60,00                   â”‚
â”‚                                                  R$ 17.248,59    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… CHECKLIST FINAL

- [ ] Script SQL executado sem erros
- [ ] 17 lanÃ§amentos criados (4 alimentaÃ§Ã£o + 4 transporte + 1 falta + 8 outros)
- [ ] KPI AlimentaÃ§Ã£o = R$ 2.175,00
- [ ] KPI Transporte = R$ 696,00
- [ ] KPI Faltas Justificadas = 1 dia (R$ 60,00)
- [ ] KPI Outros = R$ 1.550,00
- [ ] KPI Total = R$ 17.248,59
- [ ] Filtros de data funcionam
- [ ] Filtros de obra funcionam
- [ ] GrÃ¡ficos atualizam corretamente

---

**Pronto para testar as KPIs do dashboard!** ğŸš€

