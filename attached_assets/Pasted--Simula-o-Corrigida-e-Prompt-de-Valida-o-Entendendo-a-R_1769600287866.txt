# Simula√ß√£o Corrigida e Prompt de Valida√ß√£o

## üéØ Entendendo a Regra de Toler√¢ncia

Agora com a regra correta, a simula√ß√£o foi refeita. A l√≥gica √©:

-   **Atraso de 9 minutos:** N√£o desconta nada.
-   **Atraso de 11 minutos:** Desconta os **11 minutos completos**.

## üí∞ Simula√ß√£o Recalculada (Janeiro/2026)

### Impacto da Nova Regra:

| Dia | Evento | Simula√ß√£o Anterior | Simula√ß√£o Corrigida |
| :-- | :--- | :--- | :--- |
| 09 | Atraso de 15 min | Desconto de 5 min | Desconto de **15 min** |
| 10 | Sa√≠da 1h antes | Desconto de 50 min | Desconto de **60 min** |

### Resultado Final Corrigido:

| Descri√ß√£o | Valor |
| :--- | :--- |
| Sal√°rio Base | R$ 3.500,00 |
| **(+)** HE 50% | R$ 143,18 |
| **(+)** HE 100% | R$ 470,91 |
| **(+)** DSR sobre Extras | R$ 111,65 |
| **(-)** Desconto DSR por Falta | R$ 116,67 |
| **(-)** Descontos (Faltas/Atrasos) | **R$ 179,77** |
| **SAL√ÅRIO L√çQUIDO** | **R$ 3.929,30** |

## üöÄ Prompt de Valida√ß√£o para o Replit Agent

Agora que temos os valores exatos, podemos criar um prompt para o Replit Agent validar se o sistema est√° calculando corretamente.

### Prompt para o Replit Agent:

```
**A√á√ÉO DE VALIDA√á√ÉO DE C√ÅLCULO DE SAL√ÅRIO**

**Contexto:**

-   **Objetivo:** Validar se o sistema est√° calculando corretamente o sal√°rio de um funcion√°rio com base em um m√™s de lan√ßamentos variados, especialmente a regra de toler√¢ncia de atraso.

**Sua Tarefa:**

1.  **Analise a L√≥gica de Toler√¢ncia:**
    -   Verifique no c√≥digo (provavelmente em `ponto_service.py` ou `folha_service.py`) como a toler√¢ncia de atraso √© aplicada.
    -   A regra deve ser: se o atraso (ou sa√≠da antecipada) for **maior** que a toler√¢ncia (10 minutos), o tempo **total** do atraso deve ser descontado. Se for menor ou igual, nada √© descontado.

2.  **Crie um Teste Unit√°rio:**
    -   Crie um novo arquivo de teste `test_calculo_tolerancia.py`.
    -   Neste teste, simule os seguintes cen√°rios:
        -   Atraso de 9 minutos ‚Üí Desconto = 0
        -   Atraso de 10 minutos ‚Üí Desconto = 0
        -   Atraso de 11 minutos ‚Üí Desconto = 11 minutos
        -   Sa√≠da antecipada de 9 minutos ‚Üí Desconto = 0
        -   Sa√≠da antecipada de 11 minutos ‚Üí Desconto = 11 minutos

3.  **Execute o Teste e Corrija se Necess√°rio:**
    -   Execute o teste que voc√™ criou.
    -   Se o teste falhar, identifique a falha na l√≥gica de c√°lculo e corrija-a.
    -   A corre√ß√£o provavelmente ser√° algo como:

        ```python
        # L√≥gica Incorreta (desconta s√≥ o excedente):
        if atraso > tolerancia:
            minutos_a_descontar = atraso - tolerancia
        
        # L√≥gica Correta (desconta tudo se ultrapassar):
        if atraso > tolerancia:
            minutos_a_descontar = atraso
        else:
            minutos_a_descontar = 0
        ```

4.  **Relate o Resultado:**
    -   Informe se a l√≥gica atual do sistema est√° correta ou se precisou de corre√ß√£o.
    -   Mostre o teste unit√°rio que voc√™ criou.

**Execute a valida√ß√£o agora.**
```

## üìã Como Usar:

1.  **Cole o prompt acima** no Replit Agent.
2.  **Aguarde a an√°lise** - O Agent vai criar um teste para verificar a regra de toler√¢ncia.
3.  **Se o teste falhar**, o Agent ir√° corrigir o c√≥digo.
4.  **Ap√≥s a corre√ß√£o**, o c√°lculo do sistema deve bater exatamente com a simula√ß√£o de **R$ 3.929,30**.
