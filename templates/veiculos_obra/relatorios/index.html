{% extends "base.html" %}

{% block title %}Relatórios Veículos-Obras - SIGE{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h4 class="mb-0">
                <i class="fas fa-chart-bar"></i>
                Relatórios Gerenciais - Veículos & Obras
            </h4>
            <small>Análises avançadas de custo, eficiência e ROI</small>
        </div>
    </div>

    <!-- Estatísticas Resumidas -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card bg-gradient-primary text-white">
                <div class="card-body text-center">
                    <h3>{{ stats.veiculos_total }}</h3>
                    <p class="mb-0">Veículos Ativos</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-gradient-info text-white">
                <div class="card-body text-center">
                    <h3>{{ stats.obras_com_veiculos }}</h3>
                    <p class="mb-0">Obras com Veículos</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-gradient-warning text-white">
                <div class="card-body text-center">
                    <h3>{{ stats.alocacoes_ativas }}</h3>
                    <p class="mb-0">Alocações Ativas</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-gradient-danger text-white">
                <div class="card-body text-center">
                    <h3>R$ {{ "%.0f"|format(stats.custo_mes_atual) }}</h3>
                    <p class="mb-0">Custos do Mês</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Relatórios Disponíveis -->
    <div class="row">
        <!-- Custo por Obra -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-dollar-sign"></i>
                        Custos por Obra
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        Análise detalhada dos custos de veículos por obra, incluindo 
                        combustível, manutenção e outros gastos.
                    </p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Custos por categoria</li>
                        <li><i class="fas fa-check text-success"></i> Comparativo entre obras</li>
                        <li><i class="fas fa-check text-success"></i> Resumo por veículo</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="{{ url_for('veiculos_relatorios.relatorio_custo_obra') }}" 
                       class="btn btn-primary">
                        <i class="fas fa-chart-line"></i>
                        Ver Relatório
                    </a>
                    <a href="{{ url_for('veiculos_relatorios.exportar_relatorio', tipo_relatorio='custo-obra', formato='csv') }}" 
                       class="btn btn-outline-primary">
                        <i class="fas fa-download"></i>
                        CSV
                    </a>
                </div>
            </div>
        </div>

        <!-- Eficiência de Veículos -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-tachometer-alt"></i>
                        Eficiência de Veículos
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        Análise de eficiência operacional dos veículos, incluindo 
                        KM rodados, consumo e produtividade.
                    </p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> KM por real gasto</li>
                        <li><i class="fas fa-check text-success"></i> Horas de uso</li>
                        <li><i class="fas fa-check text-success"></i> Score de eficiência</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="{{ url_for('veiculos_relatorios.relatorio_eficiencia') }}" 
                       class="btn btn-info">
                        <i class="fas fa-chart-area"></i>
                        Ver Relatório
                    </a>
                    <a href="{{ url_for('veiculos_relatorios.exportar_relatorio', tipo_relatorio='eficiencia', formato='csv') }}" 
                       class="btn btn-outline-info">
                        <i class="fas fa-download"></i>
                        CSV
                    </a>
                </div>
            </div>
        </div>

        <!-- ROI por Projeto -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-pie"></i>
                        ROI por Projeto
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        Retorno sobre investimento em veículos por projeto, 
                        análise de rentabilidade e eficiência operacional.
                    </p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> ROI por obra</li>
                        <li><i class="fas fa-check text-success"></i> Custo vs receita</li>
                        <li><i class="fas fa-check text-success"></i> Classificação de eficiência</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="{{ url_for('veiculos_relatorios.relatorio_roi') }}" 
                       class="btn btn-success">
                        <i class="fas fa-calculator"></i>
                        Ver Relatório
                    </a>
                    <a href="{{ url_for('veiculos_relatorios.exportar_relatorio', tipo_relatorio='roi', formato='csv') }}" 
                       class="btn btn-outline-success">
                        <i class="fas fa-download"></i>
                        CSV
                    </a>
                </div>
            </div>
        </div>

        <!-- Utilização da Frota -->
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">
                        <i class="fas fa-percentage"></i>
                        Utilização da Frota
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        Análise de utilização dos veículos, identificando 
                        subutilização e oportunidades de otimização.
                    </p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> % de utilização</li>
                        <li><i class="fas fa-check text-success"></i> Veículos ociosos</li>
                        <li><i class="fas fa-check text-success"></i> Recomendações</li>
                    </ul>
                </div>
                <div class="card-footer">
                    <a href="{{ url_for('veiculos_relatorios.relatorio_utilizacao') }}" 
                       class="btn btn-warning">
                        <i class="fas fa-chart-bar"></i>
                        Ver Relatório
                    </a>
                    <a href="{{ url_for('veiculos_relatorios.exportar_relatorio', tipo_relatorio='utilizacao', formato='csv') }}" 
                       class="btn btn-outline-warning">
                        <i class="fas fa-download"></i>
                        CSV
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Ações Rápidas -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="fas fa-bolt"></i>
                Ações Rápidas
            </h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4">
                    <a href="{{ url_for('veiculos_obra.dashboard_integrado') }}" 
                       class="btn btn-outline-primary btn-lg w-100 mb-2">
                        <i class="fas fa-tachometer-alt fa-2x d-block"></i>
                        Dashboard Principal
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="{{ url_for('veiculos_obra.listar_alocacoes') }}" 
                       class="btn btn-outline-info btn-lg w-100 mb-2">
                        <i class="fas fa-list fa-2x d-block"></i>
                        Ver Alocações
                    </a>
                </div>
                <div class="col-md-4">
                    <a href="{{ url_for('veiculos_obra.nova_alocacao') }}" 
                       class="btn btn-outline-success btn-lg w-100 mb-2">
                        <i class="fas fa-plus fa-2x d-block"></i>
                        Nova Alocação
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.bg-gradient-primary {
    background: linear-gradient(45deg, #007bff, #0056b3);
}
.bg-gradient-info {
    background: linear-gradient(45deg, #17a2b8, #117a8b);
}
.bg-gradient-warning {
    background: linear-gradient(45deg, #ffc107, #e0a800);
}
.bg-gradient-danger {
    background: linear-gradient(45deg, #dc3545, #c82333);
}
</style>
{% endblock %}