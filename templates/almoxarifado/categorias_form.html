{% extends "base_completo.html" %}

{% block title %}{{ 'Editar' if categoria else 'Nova' }} Categoria{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col">
            <h1 class="h3 mb-0">
                <i class="fas fa-tags text-primary me-2"></i>
                {{ 'Editar' if categoria else 'Nova' }} Categoria
            </h1>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <form method="POST">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome da Categoria *</label>
                            <input type="text" class="form-control" id="nome" name="nome" 
                                   value="{{ categoria.nome if categoria else '' }}" required>
                        </div>

                        <div class="mb-3">
                            <label for="tipo_controle_padrao" class="form-label">Tipo de Controle Padrão *</label>
                            <select class="form-select" id="tipo_controle_padrao" name="tipo_controle_padrao" required>
                                <option value="SERIALIZADO" {{ 'selected' if categoria and categoria.tipo_controle_padrao == 'SERIALIZADO' else '' }}>
                                    Serializado (itens únicos com número de série)
                                </option>
                                <option value="CONSUMIVEL" {{ 'selected' if categoria and categoria.tipo_controle_padrao == 'CONSUMIVEL' else '' }}>
                                    Consumível (materiais por quantidade)
                                </option>
                            </select>
                            <div class="form-text">Define como itens desta categoria serão controlados por padrão</div>
                        </div>

                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="permite_devolucao_padrao" 
                                   name="permite_devolucao_padrao" 
                                   {{ 'checked' if not categoria or categoria.permite_devolucao_padrao else '' }}>
                            <label class="form-check-label" for="permite_devolucao_padrao">
                                Permite devolução por padrão
                            </label>
                            <div class="form-text">Serializados sempre permitem devolução (não editável)</div>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>
                                {{ 'Atualizar' if categoria else 'Criar' }}
                            </button>
                            <a href="{{ url_for('almoxarifado.categorias') }}" class="btn btn-secondary">
                                <i class="fas fa-times me-1"></i>
                                Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm bg-light">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-info-circle me-2"></i>Categorias Padrão Sugeridas</h5>
                    <ul class="list-unstyled mb-0">
                        <li class="mb-2"><strong>EPIs:</strong> Serializado, Permite devolução</li>
                        <li class="mb-2"><strong>Ferramentas:</strong> Serializado, Permite devolução</li>
                        <li class="mb-2"><strong>Materiais Elétricos:</strong> Consumível, Permite devolução</li>
                        <li class="mb-2"><strong>Materiais Hidráulicos:</strong> Consumível, Permite devolução</li>
                        <li class="mb-2"><strong>Consumíveis Descartáveis:</strong> Consumível, Não permite devolução</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
